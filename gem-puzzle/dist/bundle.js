var modules;modules=(()=>{var e,t,i,r,n={451:e=>{e.exports='<section id="game"> <div id="game-nav"> <z-link class="game-nav-link" to="menu"><i class="material-icons">pause_circle_outline</i></z-link> <span class="game-nav-link" id=""><i style="margin-right:.2rem" class="material-icons">swap_horiz</i> <span id="move-count">0</span></span> <span class="game-nav-link" id=""><i style="margin-right:.2rem" class="material-icons">watch_later</i> <span id="min">00</span> : <span id="sec">00</span></span> </div> <div id="puzzle-field"></div> </section>'},335:e=>{e.exports='<section id="menu"> <div id="menu-links"> <h1>Gem-Puzzle<br>by Zidiks</h1> <z-link to="game" class="z-link-p">Play</z-link> <z-link to="menu" class="z-link-p">Score</z-link> <z-link to="options" class="z-link-p">Options</z-link> <z-link to="exit" class="z-link-p">Exit</z-link> </div> <div id="menu-logo"> <img src="/logo.svg" alt="Zidiks"> </div> </section>'},250:e=>{e.exports="<section> <h1>TEST</h1> </section>"},698:(e,t,i)=>{"use strict";i.r(t)},4:(e,t,i)=>{"use strict";i.r(t)},608:(e,t,i)=>{"use strict";i.r(t)},672:(e,t,i)=>{const{routeTo:r}=i(339);r("menu")},565:(e,t,i)=>{i.e(673).then((function(){i(110),i(377)})).catch(i.oe);const r=i(451),{buildField:n}=i(150);e.exports={template:r,oninit:()=>{n()}}},691:(e,t,i)=>{i(4);const r=i(335);e.exports={template:r,oninit:()=>{console.log("Start menu")}}},241:(e,t,i)=>{e.exports={menu:i(691),options:i(853),game:i(565),main_css:i(698),router:i(339)}},853:(e,t,i)=>{i(608);const r=i(250);e.exports={template:r,options:{size:4},oninit:()=>{console.log("Start options")},globalProps:{clearPuzzleXY:{x:0,y:0},matrix:[],solution:[],moves:[],timer:0,pause:!0,stop:!0},createApp:()=>{const e=document.body,t=document.createElement("app");e.appendChild(t);const i=document.createElement("div");i.id="app-bg",i.classList.add("area"),i.innerHTML='<ul id="app-bg-circles" class="circles"><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul>',e.appendChild(i)}}},150:(e,t,i)=>{const{options:r,globalProps:n}=i(853);function o(e,t){let i=e-.5+Math.random()*(t-e+1);return Math.round(i)}function l(e){let t,i=[],r=1;for(let n=0;n<e;n++){t=[];for(let i=0;i<e;i++)t.push("P"+r),r++;i.push(t)}return console.log(i),i}function a(e){let t=[];return e.forEach((e=>{t.push(`"${e.join(" ")}"`)})),t.join(" ")}function s(e,t,i){let o=[];var l;e.x-1>=0&&o.push({x:e.x-1,y:e.y}),e.x+1<=i-1&&o.push({x:e.x+1,y:e.y}),e.y-1>=0&&o.push({x:e.x,y:e.y-1}),e.y+1<=i-1&&o.push({x:e.x,y:e.y+1}),l=o,Array.from(document.getElementsByClassName("puzzle-item")).forEach((e=>{e.classList.remove("movable-puzzle")})),document.getElementById("puzzle-field").outerHTML=document.getElementById("puzzle-field").outerHTML,l.forEach((e=>{const t=document.getElementById(n.matrix[e.y][e.x]);t.classList.add("movable-puzzle"),t.addEventListener("click",(()=>{!function(e){n.moves.push({to:n.clearPuzzleXY,from:e});let t=n.matrix[e.y][e.x];n.matrix[e.y][e.x]=n.matrix[n.clearPuzzleXY.y][n.clearPuzzleXY.x],n.matrix[n.clearPuzzleXY.y][n.clearPuzzleXY.x]=t,n.clearPuzzleXY=e,s(n.clearPuzzleXY,n.matrix,r.size),console.log(n.moves),document.getElementById("move-count").innerHTML=n.moves.length,n.solution.toString()==n.matrix.toString()&&setTimeout((()=>{alert("You win!")}),100)}(e)}))})),document.getElementById("puzzle-field").style.gridTemplateAreas=a(n.matrix)}function c(){setTimeout((()=>{if(!n.pause&&!n.stop){n.timer++;let e=n.timer%60,t=n.timer>=60?(n.timer-e)/60:0;document.getElementById("min").innerHTML=t<10?"0"+t:t,document.getElementById("sec").innerHTML=e<10?"0"+e:e}n.stop||c()}),1e3)}t.buildField=()=>{const e=document.createElement("canvas");e.width=1e3/r.size,e.height=1e3/r.size;var t=e.getContext("2d"),i=new Image;const u=document.getElementById("puzzle-field"),m=r.size**2;u.style.gridTemplateColumns=`repeat(${r.size}, 1fr)`,u.style.gridTemplateRows=`repeat(${r.size}, 1fr)`;var d=0,p=0;i.onload=function(){if(i.height>=i.width)var g=1e3,h=1e3*i.height/i.width;else g=1e3*i.width/i.height,h=1e3;for(let n=1;n<=m;n++){const o=document.createElement("div");o.classList.add("puzzle-item"),o.id="P"+n,t.drawImage(i,d,p,g,h),dataUrl=e.toDataURL("image/png"),o.style.backgroundImage=`url(${dataUrl})`,u.appendChild(o),n%r.size==0?(d=0,p-=1e3/r.size):d-=1e3/r.size}n.clearPuzzleXY={x:o(0,r.size-1),y:o(0,r.size-1)},n.moves=[],n.timer=0,n.matrix=l(r.size),n.solution=l(r.size),document.getElementById("puzzle-field").style.gridTemplateAreas=a(n.matrix),document.getElementById(n.matrix[n.clearPuzzleXY.y][n.clearPuzzleXY.x]).classList.add("clear-puzzle"),s(n.clearPuzzleXY,n.matrix,r.size),n.pause=!1,n.stop=!1,n.timer=0,c()},i.src="darth-vader.jpg"}},339:function(e,t,i){const{menu:r,game:n,options:o}=i(241);o.createApp();const l=document.getElementsByTagName("app")[0];function a(e){l.innerHTML=e.template,e.oninit()}t.initRoutes=()=>{Array.from(document.querySelectorAll("z-link")).forEach((e=>{e.addEventListener("click",(()=>{this.routeTo(e.getAttribute("to"))}))}))},t.routeTo=e=>{l.style.opacity=0,setTimeout((()=>{switch(e){case"menu":a(r),o.globalProps.pause=!0,o.globalProps.stop=!0;break;case"options":a(o),o.globalProps.pause=!0,o.globalProps.stop=!0;break;case"game":a(n);break;case"exit":window.close();break;default:a(r)}this.initRoutes(),setTimeout((()=>{l.style.opacity=1}),250)}),200)}}},o={};function l(e){if(o[e])return o[e].exports;var t=o[e]={exports:{}};return n[e].call(t.exports,t,t.exports,l),t.exports}return l.m=n,l.f={},l.e=e=>Promise.all(Object.keys(l.f).reduce(((t,i)=>(l.f[i](e,t),t)),[])),l.u=e=>e+".bundle.js",l.miniCssF=e=>(179===e?"main":e)+".css",l.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},t="modules:",l.l=(i,r,n)=>{if(e[i])e[i].push(r);else{var o,a;if(void 0!==n)for(var s=document.getElementsByTagName("script"),c=0;c<s.length;c++){var u=s[c];if(u.getAttribute("src")==i||u.getAttribute("data-webpack")==t+n){o=u;break}}o||(a=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,l.nc&&o.setAttribute("nonce",l.nc),o.setAttribute("data-webpack",t+n),o.src=i),e[i]=[r];var m=(t,r)=>{o.onerror=o.onload=null,clearTimeout(d);var n=e[i];if(delete e[i],o.parentNode&&o.parentNode.removeChild(o),n&&n.forEach((e=>e(r))),t)return t(r)},d=setTimeout(m.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=m.bind(null,o.onerror),o.onload=m.bind(null,o.onload),a&&document.head.appendChild(o)}},l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;l.g.importScripts&&(e=l.g.location+"");var t=l.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");i.length&&(e=i[i.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),l.p=e})(),i=e=>new Promise(((t,i)=>{var r=l.miniCssF(e),n=l.p+r;if(((e,t)=>{for(var i=document.getElementsByTagName("link"),r=0;r<i.length;r++){var n=(l=i[r]).getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(n===e||n===t))return l}var o=document.getElementsByTagName("style");for(r=0;r<o.length;r++){var l;if((n=(l=o[r]).getAttribute("data-href"))===e||n===t)return l}})(r,n))return t();((e,t,i,r)=>{var n=document.createElement("link");n.rel="stylesheet",n.type="text/css",n.onerror=n.onload=o=>{if(n.onerror=n.onload=null,"load"===o.type)i();else{var l=o&&o.target&&o.target.href||t,a=new Error("Loading CSS chunk "+e+" failed.\n("+l+")");a.code="CSS_CHUNK_LOAD_FAILED",a.request=l,n.parentNode.removeChild(n),r(a)}},n.href=t,document.head.appendChild(n)})(e,n,t,i)})),r={179:0},l.f.miniCss=(e,t)=>{r[e]?t.push(r[e]):0!==r[e]&&{673:1}[e]&&t.push(r[e]=i(e).then((()=>{r[e]=0}),(t=>{throw delete r[e],t})))},(()=>{var e={179:0};l.f.j=(t,i)=>{var r=l.o(e,t)?e[t]:void 0;if(0!==r)if(r)i.push(r[2]);else{var n=new Promise(((i,n)=>{r=e[t]=[i,n]}));i.push(r[2]=n);var o=l.p+l.u(t),a=new Error;l.l(o,(i=>{if(l.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var n=i&&("load"===i.type?"missing":i.type),o=i&&i.target&&i.target.src;a.message="Loading chunk "+t+" failed.\n("+n+": "+o+")",a.name="ChunkLoadError",a.type=n,a.request=o,r[1](a)}}),"chunk-"+t)}};var t=self.webpackChunkmodules=self.webpackChunkmodules||[],i=t.push.bind(t);t.push=t=>{for(var r,n,[o,a,s]=t,c=0,u=[];c<o.length;c++)n=o[c],l.o(e,n)&&e[n]&&u.push(e[n][0]),e[n]=0;for(r in a)l.o(a,r)&&(l.m[r]=a[r]);for(s&&s(l),i(t);u.length;)u.shift()()}})(),l(672)})();