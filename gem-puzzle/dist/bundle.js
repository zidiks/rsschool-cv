var modules;modules=(()=>{var e,t,r,i,o={451:e=>{e.exports='<section id="game"> <div id="game-nav"> <z-link class="game-nav-link" to="menu"><i class="material-icons">pause_circle_outline</i></z-link> <span class="game-nav-link" id=""><i style="margin-right:.2rem" class="material-icons">swap_horiz</i> <span id="move-count">0</span></span> <span class="game-nav-link" id=""><i style="margin-right:.2rem" class="material-icons">watch_later</i> <span id="min">00</span> : <span id="sec">00</span></span> </div> <div id="puzzle-field"></div> </section>'},335:e=>{e.exports='<section id="menu"> <div id="menu-links"> <h1>Gem-Puzzle<br>by Zidiks</h1> <z-link to="game" class="z-link-p">Play</z-link> <z-link to="menu" class="z-link-p">Score</z-link> <z-link to="options" class="z-link-p">Options</z-link> <z-link to="exit" class="z-link-p">Exit</z-link> </div> <div id="menu-logo"> <img src="/logo.svg" alt="Zidiks"> </div> </section>'},250:e=>{e.exports="<section> <h1>TEST</h1> </section>"},698:(e,t,r)=>{"use strict";r.r(t)},4:(e,t,r)=>{"use strict";r.r(t)},608:(e,t,r)=>{"use strict";r.r(t)},672:(e,t,r)=>{const{routeTo:i}=r(339);i("menu")},565:(e,t,r)=>{r.e(673).then((function(){r(110),r(377)})).catch(r.oe);const i=r(451),{buildField:o}=r(150);e.exports={template:i,oninit:()=>{o()}}},691:(e,t,r)=>{r(4);const i=r(335);e.exports={template:i,oninit:()=>{console.log("Start menu")}}},241:(e,t,r)=>{e.exports={menu:r(691),options:r(853),game:r(565),main_css:r(698),router:r(339)}},853:(e,t,r)=>{r(608);const i=r(250);e.exports={template:i,options:{size:4},oninit:()=>{console.log("Start options")},globalProps:{clearPuzzleXY:{x:0,y:0},matrix:[],solution:[],moves:[],timer:0,pause:!0,stop:!0}}},150:(e,t,r)=>{const{options:i,globalProps:o}=r(853);function n(e,t){let r=e-.5+Math.random()*(t-e+1);return Math.round(r)}function s(e){let t,r=[],i=1;for(let o=0;o<e;o++){t=[];for(let r=0;r<e;r++)t.push("P"+i),i++;r.push(t)}return r}function a(e){let t=[];return e.forEach((e=>{t.push(`"${e.join(" ")}"`)})),t.join(" ")}function l(e,t,r){let n=[];var s;e.x-1>=0&&n.push({x:e.x-1,y:e.y}),e.x+1<=r-1&&n.push({x:e.x+1,y:e.y}),e.y-1>=0&&n.push({x:e.x,y:e.y-1}),e.y+1<=r-1&&n.push({x:e.x,y:e.y+1}),s=n,Array.from(document.getElementsByClassName("puzzle-item")).forEach((e=>{e.classList.remove("movable-puzzle")})),document.getElementById("puzzle-field").outerHTML=document.getElementById("puzzle-field").outerHTML,s.forEach((e=>{const t=document.getElementById(o.matrix[e.y][e.x]);t.classList.add("movable-puzzle"),t.addEventListener("click",(()=>{!function(e){o.moves.push({to:o.clearPuzzleXY,from:e});let t=o.matrix[e.y][e.x];o.matrix[e.y][e.x]=o.matrix[o.clearPuzzleXY.y][o.clearPuzzleXY.x],o.matrix[o.clearPuzzleXY.y][o.clearPuzzleXY.x]=t,o.clearPuzzleXY=e,l(o.clearPuzzleXY,o.matrix,i.size),console.log(o.moves),document.getElementById("move-count").innerHTML=o.moves.length,o.solution.toString()==o.matrix.toString()&&setTimeout((()=>{alert("You win!")}),100)}(e)}))})),document.getElementById("puzzle-field").style.gridTemplateAreas=a(o.matrix)}function u(){setTimeout((()=>{if(!o.pause&&!o.stop){o.timer++;let e=o.timer%60,t=o.timer>=60?(lobalProps.timer-e)/60:0;document.getElementById("min").innerHTML=t<10?"0"+t:t,document.getElementById("sec").innerHTML=e<10?"0"+e:e}o.stop||u()}),1e3)}t.buildField=()=>{const e=document.createElement("canvas");e.width=1e3/i.size,e.height=1e3/i.size;var t=e.getContext("2d"),r=new Image;const c=document.getElementById("puzzle-field"),m=i.size**2;c.style.gridTemplateColumns=`repeat(${i.size}, 1fr)`,c.style.gridTemplateRows=`repeat(${i.size}, 1fr)`;var d=0,p=0;r.onload=function(){if(r.height>=r.width)var g=1e3,h=1e3*r.height/r.width;else g=1e3*r.width/r.height,h=1e3;for(let o=1;o<=m;o++){const n=document.createElement("div");n.classList.add("puzzle-item"),n.id="P"+o,t.drawImage(r,d,p,g,h),dataUrl=e.toDataURL("image/png"),n.style.backgroundImage=`url(${dataUrl})`,c.appendChild(n),o%i.size==0?(d=0,p-=1e3/i.size):d-=1e3/i.size}o.clearPuzzleXY={x:n(0,i.size-1),y:n(0,i.size-1)},o.moves=[],o.timer=0,o.matrix=s(i.size),o.solution=s(i.size),document.getElementById("puzzle-field").style.gridTemplateAreas=a(o.matrix),document.getElementById(o.matrix[o.clearPuzzleXY.y][o.clearPuzzleXY.x]).classList.add("clear-puzzle"),l(o.clearPuzzleXY,o.matrix,i.size),o.pause=!1,o.stop=!1,o.timer=0,u()},r.src="darth-vader.jpg"}},339:function(e,t,r){const{menu:i,game:o,options:n}=r(241),s=document.getElementsByTagName("app")[0];function a(e){s.innerHTML=e.template,e.oninit()}t.initRoutes=()=>{Array.from(document.querySelectorAll("z-link")).forEach((e=>{e.addEventListener("click",(()=>{this.routeTo(e.getAttribute("to"))}))}))},t.routeTo=e=>{s.style.opacity=0,setTimeout((()=>{switch(e){case"menu":a(i),n.globalProps.pause=!0,n.globalProps.stop=!0;break;case"options":a(n),n.globalProps.pause=!0,n.globalProps.stop=!0;break;case"game":a(o);break;case"exit":window.close();break;default:a(i)}this.initRoutes(),setTimeout((()=>{s.style.opacity=1}),250)}),200)}}},n={};function s(e){if(n[e])return n[e].exports;var t=n[e]={exports:{}};return o[e].call(t.exports,t,t.exports,s),t.exports}return s.m=o,s.f={},s.e=e=>Promise.all(Object.keys(s.f).reduce(((t,r)=>(s.f[r](e,t),t)),[])),s.u=e=>e+".bundle.js",s.miniCssF=e=>(179===e?"main":e)+".css",s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},t="modules:",s.l=(r,i,o)=>{if(e[r])e[r].push(i);else{var n,a;if(void 0!==o)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var c=l[u];if(c.getAttribute("src")==r||c.getAttribute("data-webpack")==t+o){n=c;break}}n||(a=!0,(n=document.createElement("script")).charset="utf-8",n.timeout=120,s.nc&&n.setAttribute("nonce",s.nc),n.setAttribute("data-webpack",t+o),n.src=r),e[r]=[i];var m=(t,i)=>{n.onerror=n.onload=null,clearTimeout(d);var o=e[r];if(delete e[r],n.parentNode&&n.parentNode.removeChild(n),o&&o.forEach((e=>e(i))),t)return t(i)},d=setTimeout(m.bind(null,void 0,{type:"timeout",target:n}),12e4);n.onerror=m.bind(null,n.onerror),n.onload=m.bind(null,n.onload),a&&document.head.appendChild(n)}},s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;s.g.importScripts&&(e=s.g.location+"");var t=s.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");r.length&&(e=r[r.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=e})(),r=e=>new Promise(((t,r)=>{var i=s.miniCssF(e),o=s.p+i;if(((e,t)=>{for(var r=document.getElementsByTagName("link"),i=0;i<r.length;i++){var o=(s=r[i]).getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(o===e||o===t))return s}var n=document.getElementsByTagName("style");for(i=0;i<n.length;i++){var s;if((o=(s=n[i]).getAttribute("data-href"))===e||o===t)return s}})(i,o))return t();((e,t,r,i)=>{var o=document.createElement("link");o.rel="stylesheet",o.type="text/css",o.onerror=o.onload=n=>{if(o.onerror=o.onload=null,"load"===n.type)r();else{var s=n&&n.target&&n.target.href||t,a=new Error("Loading CSS chunk "+e+" failed.\n("+s+")");a.code="CSS_CHUNK_LOAD_FAILED",a.request=s,o.parentNode.removeChild(o),i(a)}},o.href=t,document.head.appendChild(o)})(e,o,t,r)})),i={179:0},s.f.miniCss=(e,t)=>{i[e]?t.push(i[e]):0!==i[e]&&{673:1}[e]&&t.push(i[e]=r(e).then((()=>{i[e]=0}),(t=>{throw delete i[e],t})))},(()=>{var e={179:0};s.f.j=(t,r)=>{var i=s.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var o=new Promise(((r,o)=>{i=e[t]=[r,o]}));r.push(i[2]=o);var n=s.p+s.u(t),a=new Error;s.l(n,(r=>{if(s.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var o=r&&("load"===r.type?"missing":r.type),n=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+o+": "+n+")",a.name="ChunkLoadError",a.type=o,a.request=n,i[1](a)}}),"chunk-"+t)}};var t=self.webpackChunkmodules=self.webpackChunkmodules||[],r=t.push.bind(t);t.push=t=>{for(var i,o,[n,a,l]=t,u=0,c=[];u<n.length;u++)o=n[u],s.o(e,o)&&e[o]&&c.push(e[o][0]),e[o]=0;for(i in a)s.o(a,i)&&(s.m[i]=a[i]);for(l&&l(s),r(t);c.length;)c.shift()()}})(),s(672)})();