var modules;modules=(()=>{var e,t,l,n,i={451:e=>{e.exports='<section id="game"> <div id="game-nav"> <z-link id="tomenu" class="game-nav-link" to="menu"><i class="material-icons">pause_circle_outline</i></z-link> <span class="game-nav-link" id=""><i style="margin-right:.2rem" class="material-icons">swap_horiz</i> <span id="move-count">0</span></span> <span class="game-nav-link" id=""><i style="margin-right:.2rem" class="material-icons">watch_later</i> <span id="min">00</span> : <span id="sec">00</span></span> <san class="game-nav-link game-nav-btn" id="revert-btn"><i class="material-icons">support</i> </san></div> <div id="puzzle-field"></div> </section>'},335:e=>{e.exports='<section id="menu"> <div id="menu-links"> <h1>Gem-Puzzle<br>by Zidiks</h1> <z-link to="game" class="z-link-p">Play</z-link> <z-link to="menu" class="z-link-p">Score</z-link> <z-link to="options" class="z-link-p">Options</z-link> <z-link to="exit" class="z-link-p" data-toggle-fullscreen>Exit</z-link> </div> <div id="menu-logo"> <img src="/assets/logo.svg" alt="Zidiks"> </div> <div id="author"> <h1>Created by Zidiks with love <span class="material-icons author-heart">favorite</span></h1> <span id="next" data-toggle-fullscreen>Play<i class="material-icons">navigate_next</i></span> </div> </section>'},250:e=>{e.exports="<section> <h1>TEST</h1> </section>"},698:(e,t,l)=>{"use strict";l.r(t)},4:(e,t,l)=>{"use strict";l.r(t)},608:(e,t,l)=>{"use strict";l.r(t)},672:(e,t,l)=>{const{routeTo:n}=l(339);Element.prototype.requestFullscreen||(Element.prototype.requestFullscreen=Element.prototype.mozRequestFullscreen||Element.prototype.webkitRequestFullscreen||Element.prototype.msRequestFullscreen),document.exitFullscreen||(document.exitFullscreen=document.mozExitFullscreen||document.webkitExitFullscreen||document.msExitFullscreen),document.fullscreenElement||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),n("menu")},565:(e,t,l)=>{l.e(673).then((function(){l(110),l(377)})).catch(l.oe);const n=l(451),{globalProps:i}=l(853),{buildField:o}=l(150);e.exports={template:n,oninit:()=>{document.getElementById("tomenu").addEventListener("click",(()=>{setTimeout((()=>{i.audioFile.currentTime=0,i.audioFile.play()}),400)})),o()}}},691:(e,t,l)=>{l(4);const n=l(335),{globalProps:i}=l(853);var o;e.exports={template:n,oninit:()=>{const e=document.getElementById("author");i.fopen&&(i.fopen=!1,e.style.display="flex");const t=document.getElementById("next");document.addEventListener("click",(function(e){e.target.hasAttribute("data-toggle-fullscreen")&&(document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen())}),!1),t.addEventListener("click",(()=>{e.style.display="none",console.log("Start menu"),i.audioFile.currentTime=0,i.audioFile.play(),o=setInterval((()=>{1==i.stop?(i.audioFile.currentTime=0,i.audioFile.play()):clearInterval(o)}),42670)}))},soundInterval:o}},241:(e,t,l)=>{e.exports={menu:l(691),options:l(853),game:l(565),main_css:l(698),router:l(339)}},853:(e,t,l)=>{l(608);const n=l(250),i={clearPuzzleXY:{x:0,y:0},matrix:[],solution:[],moves:[],timer:0,pause:!0,stop:!0,win:!1,fopen:!0,audioFile:new Audio("/assets/bg-audio.mp3"),playAudio:new Audio("/assets/play-audio.mp3"),gap:0,gameInterval:void 0,currEl:void 0,currAnimation:void 0};e.exports={template:n,options:{size:8},oninit:()=>{console.log("Start options")},globalProps:i,createApp:()=>{const e=document.body,t=document.createElement("app");e.appendChild(t);const l=document.createElement("div");l.id="app-bg",l.classList.add("area"),l.innerHTML='<ul id="app-bg-circles" class="circles"><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul>',e.appendChild(l);const n=document.createElement("div");n.id="loading",n.innerHTML='<img src="/assets/loading.svg">',e.appendChild(n)}}},150:(e,t,l)=>{const{options:n,globalProps:i}=l(853);function o(e,t){let l=e-.5+Math.random()*(t-e+1);return Math.round(l)}function r(e){let t,l=[],n=1;for(let i=0;i<e;i++){t=[];for(let l=0;l<e;l++)t.push("P"+n),n++;l.push(t)}return console.log(l),l}function a(e){let t=[];return e.forEach((e=>{t.push(`"${e.join(" ")}"`)})),t.join(" ")}function s(e,t,l){let o=[];var r;e.x-1>=0&&o.push({x:e.x-1,y:e.y,anim:{top:0,left:1}}),e.x+1<=l-1&&o.push({x:e.x+1,y:e.y,anim:{left:-1,top:0}}),e.y-1>=0&&o.push({x:e.x,y:e.y-1,anim:{left:0,top:1}}),e.y+1<=l-1&&o.push({x:e.x,y:e.y+1,anim:{left:0,top:-1}}),r=o,Array.from(document.getElementsByClassName("puzzle-item")).forEach((e=>{e.classList.remove("movable-puzzle")})),document.getElementById("puzzle-field").outerHTML=document.getElementById("puzzle-field").outerHTML,r.forEach((e=>{const t=document.getElementById(i.matrix[e.y][e.x]);t.classList.add("movable-puzzle"),t.addEventListener("click",(()=>{i.currEl=i.matrix[e.y][e.x],function(e){i.moves.push({to:i.clearPuzzleXY,from:e});let t=i.matrix[e.y][e.x];i.matrix[e.y][e.x]=i.matrix[i.clearPuzzleXY.y][i.clearPuzzleXY.x],i.matrix[i.clearPuzzleXY.y][i.clearPuzzleXY.x]=t,i.clearPuzzleXY=e,s(i.clearPuzzleXY,i.matrix,n.size),console.log(i.moves),document.getElementById("move-count").innerHTML=i.moves.length-13*n.size,i.solution.toString()==i.matrix.toString()&&0==i.pause&&0==i.stop&&setTimeout((()=>{alert("You win!"),i.win=!0,i.pause=!0}),100)}(e),d(i.currEl,e.anim)}))}))}function u(e,t,l){let r=[];e.x-1>=0&&r.push({x:e.x-1,y:e.y,anim:{top:0,left:1}}),e.x+1<=l-1&&r.push({x:e.x+1,y:e.y,anim:{left:-1,top:0}}),e.y-1>=0&&r.push({x:e.x,y:e.y-1,anim:{left:0,top:1}}),e.y+1<=l-1&&r.push({x:e.x,y:e.y+1,anim:{left:0,top:-1}}),function(e){i.moves.push({to:i.clearPuzzleXY,from:e});let t=i.matrix[e.y][e.x];i.matrix[e.y][e.x]=i.matrix[i.clearPuzzleXY.y][i.clearPuzzleXY.x],i.matrix[i.clearPuzzleXY.y][i.clearPuzzleXY.x]=t,i.clearPuzzleXY=e,s(i.clearPuzzleXY,i.matrix,n.size),console.log(i.moves),document.getElementById("move-count").innerHTML=i.moves.length-13*n.size,i.solution.toString()==i.matrix.toString()&&0==i.pause&&0==i.stop&&setTimeout((()=>{alert("You win!"),i.win=!0,i.pause=!0}),100)}(r[o(0,r.length-1)])}function c(){setTimeout((()=>{if(!i.pause&&!i.stop){i.timer++;let e=i.timer%60,t=i.timer>=60?(i.timer-e)/60:0;document.getElementById("min").innerHTML=t<10?"0"+t:t,document.getElementById("sec").innerHTML=e<10?"0"+e:e}i.stop||c()}),1e3)}function m(){i.moves.reverse().forEach(((e,t)=>{setTimeout((()=>{i.win||function(e,t){let l=i.matrix[e.y][e.x];i.currEl=i.matrix[e.y][e.x],d(i.currEl,t,-1),i.matrix[e.y][e.x]=i.matrix[i.clearPuzzleXY.y][i.clearPuzzleXY.x],i.matrix[i.clearPuzzleXY.y][i.clearPuzzleXY.x]=l,i.clearPuzzleXY=e,s(i.clearPuzzleXY,i.matrix,n.size),document.getElementById("move-count").innerHTML=i.moves.length,i.solution.toString()==i.matrix.toString()&&0==i.pause&&0==i.stop&&setTimeout((()=>{i.pause=!0,i.win=!0,alert("You win!")}),100)}(e.to,e.from.anim)}),320*(t+1))}))}function d(e,t,l=1){if(console.log(e),e){const n=(document.getElementsByClassName("puzzle-item")[0].offsetWidth+5)/300;let o=Date.now(),r=setInterval((function(){let s=Date.now()-o;if(s>=300)return clearInterval(r),void setTimeout((()=>{document.getElementById("puzzle-field").style.gridTemplateAreas=a(i.matrix),document.getElementById(e).style.left="0px",document.getElementById(e).style.top="0px"}),10);!function(i){document.getElementById(e).style.left=i*t.left*l*n+"px",document.getElementById(e).style.top=i*t.top*l*n+"px"}(s)}),10)}e||(document.getElementById("puzzle-field").style.gridTemplateAreas=a(i.matrix)),i.currEl=void 0}t.buildField=()=>{document.getElementById("loading").style.display="flex";const e=document.createElement("canvas"),t=document.getElementById("loading"),l=document.getElementById("revert-btn");e.width=1e3/n.size,e.height=1e3/n.size;var a=e.getContext("2d"),p=new Image;const g=document.getElementById("puzzle-field"),y=n.size**2;g.style.gridTemplateColumns=`repeat(${n.size}, 1fr)`,g.style.gridTemplateRows=`repeat(${n.size}, 1fr)`;var f=0,z=0;p.onload=function(){if(p.height>=p.width)var h=1e3,v=1e3*p.height/p.width;else h=1e3*p.width/p.height,v=1e3;for(let t=1;t<=y;t++){const l=document.createElement("div");l.classList.add("puzzle-item"),l.id="P"+t,a.drawImage(p,f,z,h,v),dataUrl=e.toDataURL("image/png"),l.style.backgroundImage=`url(${dataUrl})`,g.appendChild(l),t%n.size==0?(f=0,z-=1e3/n.size):f-=1e3/n.size}i.clearPuzzleXY={x:o(0,n.size-1),y:o(0,n.size-1)},i.timer=0,i.moves=[],i.win=!1,i.matrix=r(n.size),i.solution=r(n.size),function(){for(let e=0;e<13*n.size;e++)u(i.clearPuzzleXY,i.matrix,n.size);s(i.clearPuzzleXY,i.matrix,n.size),d()}(),document.getElementById(i.matrix[i.clearPuzzleXY.y][i.clearPuzzleXY.x]).classList.add("clear-puzzle"),i.pause=!1,i.stop=!1,l.addEventListener("click",m),setTimeout((()=>{t.style.display="none",i.playAudio.currentTime=0,i.playAudio.play();var e=setInterval((()=>{0==i.stop&&0==i.pause?(i.playAudio.currentTime=0,i.playAudio.play()):clearInterval(e)}),21e3)}),1e3),i.timer=0,c()},p.src="darth-vader.jpg"}},339:function(e,t,l){const{menu:n,game:i,options:o}=l(241);o.createApp();const r=document.getElementsByTagName("app")[0];function a(e){r.innerHTML=e.template,e.oninit()}document.getElementById("loading"),t.initRoutes=()=>{Array.from(document.querySelectorAll("z-link")).forEach((e=>{e.addEventListener("click",(()=>{this.routeTo(e.getAttribute("to"))}))}))},t.routeTo=e=>{r.style.opacity=0,setTimeout((()=>{switch(e){case"menu":if(a(n),o.globalProps.pause=!0,o.globalProps.stop=!0,o.globalProps.playAudio.currentTime=0,o.globalProps.playAudio.pause(),o.globalProps.fopen){o.globalProps.audioFile.currentTime=0,o.globalProps.audioFile.play();var t=setInterval((()=>{1==o.globalProps.stop?(o.globalProps.audioFile.currentTime=0,o.globalProps.audioFile.play()):clearInterval(t)}),42670)}break;case"options":a(o),o.globalProps.pause=!0,o.globalProps.stop=!0;break;case"game":o.globalProps.audioFile.currentTime=0,o.globalProps.audioFile.pause(),clearInterval(n.soundInterval),a(i);break;case"exit":break;default:a(n)}this.initRoutes(),setTimeout((()=>{r.style.opacity=1}),250)}),200)}}},o={};function r(e){if(o[e])return o[e].exports;var t=o[e]={exports:{}};return i[e].call(t.exports,t,t.exports,r),t.exports}return r.m=i,r.f={},r.e=e=>Promise.all(Object.keys(r.f).reduce(((t,l)=>(r.f[l](e,t),t)),[])),r.u=e=>e+".bundle.js",r.miniCssF=e=>(179===e?"main":e)+".css",r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},t="modules:",r.l=(l,n,i)=>{if(e[l])e[l].push(n);else{var o,a;if(void 0!==i)for(var s=document.getElementsByTagName("script"),u=0;u<s.length;u++){var c=s[u];if(c.getAttribute("src")==l||c.getAttribute("data-webpack")==t+i){o=c;break}}o||(a=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,r.nc&&o.setAttribute("nonce",r.nc),o.setAttribute("data-webpack",t+i),o.src=l),e[l]=[n];var m=(t,n)=>{o.onerror=o.onload=null,clearTimeout(d);var i=e[l];if(delete e[l],o.parentNode&&o.parentNode.removeChild(o),i&&i.forEach((e=>e(n))),t)return t(n)},d=setTimeout(m.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=m.bind(null,o.onerror),o.onload=m.bind(null,o.onload),a&&document.head.appendChild(o)}},r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;r.g.importScripts&&(e=r.g.location+"");var t=r.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var l=t.getElementsByTagName("script");l.length&&(e=l[l.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=e})(),l=e=>new Promise(((t,l)=>{var n=r.miniCssF(e),i=r.p+n;if(((e,t)=>{for(var l=document.getElementsByTagName("link"),n=0;n<l.length;n++){var i=(r=l[n]).getAttribute("data-href")||r.getAttribute("href");if("stylesheet"===r.rel&&(i===e||i===t))return r}var o=document.getElementsByTagName("style");for(n=0;n<o.length;n++){var r;if((i=(r=o[n]).getAttribute("data-href"))===e||i===t)return r}})(n,i))return t();((e,t,l,n)=>{var i=document.createElement("link");i.rel="stylesheet",i.type="text/css",i.onerror=i.onload=o=>{if(i.onerror=i.onload=null,"load"===o.type)l();else{var r=o&&o.target&&o.target.href||t,a=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");a.code="CSS_CHUNK_LOAD_FAILED",a.request=r,i.parentNode.removeChild(i),n(a)}},i.href=t,document.head.appendChild(i)})(e,i,t,l)})),n={179:0},r.f.miniCss=(e,t)=>{n[e]?t.push(n[e]):0!==n[e]&&{673:1}[e]&&t.push(n[e]=l(e).then((()=>{n[e]=0}),(t=>{throw delete n[e],t})))},(()=>{var e={179:0};r.f.j=(t,l)=>{var n=r.o(e,t)?e[t]:void 0;if(0!==n)if(n)l.push(n[2]);else{var i=new Promise(((l,i)=>{n=e[t]=[l,i]}));l.push(n[2]=i);var o=r.p+r.u(t),a=new Error;r.l(o,(l=>{if(r.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var i=l&&("load"===l.type?"missing":l.type),o=l&&l.target&&l.target.src;a.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",a.name="ChunkLoadError",a.type=i,a.request=o,n[1](a)}}),"chunk-"+t)}};var t=self.webpackChunkmodules=self.webpackChunkmodules||[],l=t.push.bind(t);t.push=t=>{for(var n,i,[o,a,s]=t,u=0,c=[];u<o.length;u++)i=o[u],r.o(e,i)&&e[i]&&c.push(e[i][0]),e[i]=0;for(n in a)r.o(a,n)&&(r.m[n]=a[n]);for(s&&s(r),l(t);c.length;)c.shift()()}})(),r(672)})();